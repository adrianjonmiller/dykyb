(function(e){e.fn.scrollTo=function(t){function o(){function i(t){return t==n.length-1?e(document).height():e("#"+n[t+1]).offset().top}var t=r.scrollTop();jQuery.each(n,function(r,o){var u=e("#"+o).offset();if(t>=u.top-s&&t<i(r)){e("nav li").removeClass("current");e("[href=#"+n[r]+"]").parent().addClass("current")}})}var n=[],r=e(window),i=e.extend({vertical_adjust:0},t),s=t.vertical_adjust;e("html,body").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){(t.which>0||t.type=="mousedown"||t.type=="mousewheel")&&e("html,body").stop()});this.each(function(){n.push(e(this).attr("id"))});e("nav a").click(function(){var t=e(e(this).attr("href")).offset();e("html, body").animate({scrollTop:t.top},1e3);return!1});e(window).scroll(function(){o()});o()}})(jQuery);